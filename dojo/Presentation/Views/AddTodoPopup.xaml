<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:Presentation.ViewModels"
             x:Class="Presentation.Views.AddTodoPopup"
             x:DataType="viewmodels:AddTodoViewModel"
             Title="Додати завдання"
             BackgroundColor="#80000000">
    
    <Grid VerticalOptions="Center" HorizontalOptions="Center" Padding="20">
        <Border 
            BackgroundColor="White"
            StrokeShape="RoundRectangle 12"
            Stroke="#E0E0E0"
            StrokeThickness="2"
            Padding="25"
            WidthRequest="450"
            Shadow="{Shadow Brush=Black, Opacity=0.3, Radius=10, Offset='0,5'}">
            
            <VerticalStackLayout Spacing="20">
                <!-- Header -->
                <Grid ColumnDefinitions="*,Auto">
                    <Label 
                        Grid.Column="0"
                        Text="✓ Нове завдання"
                        FontSize="20"
                        FontAttributes="Bold"
                        TextColor="#333"/>
                    <Button 
                        Grid.Column="1"
                        Text="✕"
                        BackgroundColor="Transparent"
                        TextColor="#999"
                        FontSize="20"
                        Padding="5"
                        Command="{Binding CloseCommand}"/>
                </Grid>
                
                
                <!-- Task Title -->
                <VerticalStackLayout Spacing="8">
                    <Label 
                        Text="Назва завдання"
                        FontSize="14"
                        FontAttributes="Bold"
                        TextColor="#666"/>
                    <Border 
                        Stroke="#E0E0E0"
                        StrokeThickness="1"
                        StrokeShape="RoundRectangle 6"
                        BackgroundColor="#F9F9F9">
                        <Entry 
                            Text="{Binding Title}"
                            Placeholder="Наприклад: Зробити домашнє завдання"
                            FontSize="14"
                            TextColor="#333"
                            Margin="10,0"/>
                    </Border>
                    <Label 
                        Text="{Binding TitleError}"
                        TextColor="Red"
                        FontSize="12"
                        IsVisible="{Binding TitleError, Converter={StaticResource StringToBoolConverter}}"/>
                </VerticalStackLayout>
                
                
                <!-- Task Description -->
                <VerticalStackLayout Spacing="8">
                    <Label 
                        Text="Опис завдання"
                        FontSize="14"
                        FontAttributes="Bold"
                        TextColor="#666"/>
                    <Border 
                        Stroke="#E0E0E0"
                        StrokeThickness="1"
                        StrokeShape="RoundRectangle 6"
                        BackgroundColor="#F9F9F9">
                        <Editor 
                            Text="{Binding Description}"
                            Placeholder="Введіть опис завдання..."
                            HeightRequest="80"
                            FontSize="14"
                            TextColor="#333"
                            Margin="10,5"/>
                    </Border>
                    <Label 
                        Text="{Binding DescriptionError}"
                        TextColor="Red"
                        FontSize="12"
                        IsVisible="{Binding DescriptionError, Converter={StaticResource StringToBoolConverter}}"/>
                </VerticalStackLayout>

                <!-- Priority -->
                <VerticalStackLayout Spacing="8">
                    <Label 
                        Text="Пріоритет"
                        FontSize="14"
                        FontAttributes="Bold"
                        TextColor="#666"/>
                    <Border 
                        Stroke="#E0E0E0"
                        StrokeThickness="1"
                        StrokeShape="RoundRectangle 6"
                        BackgroundColor="#F9F9F9">
                        <Picker 
                            SelectedIndex="{Binding Priority}"
                            FontSize="14"
                            TextColor="#333"
                            Margin="10,0">
                            <Picker.Items>
                                <x:String>🟢 Низький</x:String>
                                <x:String>🟡 Середній</x:String>
                                <x:String>🔴 Високий</x:String>
                            </Picker.Items>
                        </Picker>
                    </Border>
                </VerticalStackLayout>
                

                <!-- Buttons -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="15" Margin="0,10,0,0">
                    <Button 
                        Grid.Column="0"
                        Text="Скасувати"
                        Command="{Binding CloseCommand}"
                        BackgroundColor="#F0F0F0"
                        TextColor="#666"
                        FontSize="14"
                        Padding="12"
                        CornerRadius="6"/>
                    <Button 
                        Grid.Column="1"
                        Text="Додати"
                        Command="{Binding SaveCommand}"
                        BackgroundColor="#FF69B4"
                        TextColor="White"
                        FontSize="14"
                        FontAttributes="Bold"
                        Padding="12"
                        CornerRadius="6"/>
                </Grid>
            </VerticalStackLayout>
        </Border>
    </Grid>
</ContentPage>